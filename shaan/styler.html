<!doctype html>
<html lang="fr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--Google Fonts-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Economica:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&amp;display=swap" rel="stylesheet">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  rel="stylesheet" crossorigin="anonymous"
  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="stylesheet" type="text/css" href="shaan.css" />
  <title>Shaan Styler</title>
  <style>
    .styled h1 {
      font-family: GodofWar, serif;
      font-variant-caps: small-caps;
    }

    .styled h2 {
      font-family: Komikazoom, sans-serif;
    }
  </style>
</head>

<body>
  <div class="shaan-title blue fixed-top" id="header">
    <h1>
      <span id="scenar-title">Mon super scénario</span>
      <span id="scenar-sep" class="d-print-none"> - </span>
      <span class="d-print-none">Shaan Styler</span>
    </h1>
  </div>
  <main class="container mt-5 pt-5">

    <nav aria-label="Fil d’ariane" class="ms-5">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="../">Aides de Jeu</a></li>
        <li class="breadcrumb-item"><a href="./">Shaan</a></li>
        <li class="breadcrumb-item active" aria-current="page">Styler</li>
      </ol>
    </nav>

    <p class="d-print-none">
      Vous avez un petit texte à proposer à vos joueur,
      et aimeriez le présenter dans la style particulier de Shaan, cet outil et fait pour vous ;)
    </p>

    <div class="row mb-3 d-print-none">
      <div class="col-md-6">
        <label for="titre" class="form-label">Titre</label>
        <input type="text" class="form-control"
        value="Mon super scénario" id="titre"/>
      </div><div class="col-md-6">
        <label for="couleur" class="form-label">Couleur du titre</label>
        <select id="couleur" class="form-select">
          <option value="blue"
            selected="selected"
            title="la couleur de l’âme">
              Bleu
          </option>
          <option value="red"
            title="la couleur du corps">
              Rouge
          </option>
          <option value="green"
            title="la couleur de la nature">
              Vert
          </option>
        </select>
      </div>
    </div>
    <p id="src-help" class="d-print-none">
      Tapez votre texte dans l’éditeur,
      au <a href="https://docs.framasoft.org/fr/grav/markdown.html" target="_blank">format Markdown</a>
    </p>
    <div class="row">
      <div class="col-md-6 d-print-none">
        <h2><label for="source" class="form-label bleu">Éditeur</label></h2>
        <textarea class="form-control" id="source"
        rows="20" aria-describedby="src-help"></textarea>
        <a class="btn btn-link" data-bs-toggle="modal" data-bs-target="#sample-modal">
          <i class="bi bi-info-circle"></i>
          Exemple de formats
        </a>
      </div>
      <div class="col">
        <h2 class="d-print-none bleu">Rendu</h2>
        <div id="preview" class="styled"></div>
      </div>
    </div>
    <p class="d-print-none">
      Quand vous avez terminé, essayez simplement d’imprimer cette page au format pdf pour
      pour conserver votre texte stylisé.
    </p>
  </main>

  <footer class="container-fluid text-bg-dark text-center mt-5 pt-2 pb-1">
    <p>Pour en savoir plus sur le jeu de rôle <strong>Shaan</strong>, rendez-vous sur<br>
      <a
    href="https://www.shaan-rpg.com">www.shaan-rpg.com</a>
  et <a href="https://www.shaan-world.com">www.shaan-world.com</a>
    </p>
  </footer>

  <div class="modal" tabindex="-1" id="sample-modal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Exemple de formats Markdown</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <textarea class="form-control"
            rows="20" id="md-sample">Modal body text goes here.</textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

  <!-- Shaan template JS -->
  <script src="shaan.js"></script>

  <script type="module">
    // Markdown parser
    import {marked} from "https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js";
    import {createDirectives} from "https://cdn.jsdelivr.net/npm/marked-directive@1.0.7/+esm";

    let sampleText = "";
    const scenarTitle = document.getElementById("scenar-title");
    const source = document.getElementById("source");
    const header = document.getElementById("header");
    const titre = document.getElementById("titre");
    const couleur = document.getElementById("couleur");
    const preview = document.getElementById("preview");
    source.addEventListener("keyup", refreshPreview);
    titre.addEventListener("keyup", refreshTitle);
    couleur.addEventListener("change", refreshColor);
    function refreshTitle() {
      scenarTitle.innerText = titre.value;
    }
    function refreshColor() {
      header.className = "shaan-title fixed-top " + couleur.value;
    }
    function refreshPreview(){
      preview.innerHTML = marked.use(createDirectives()).parse(source.value);
    }
    fetch('sample.md')
    .then(response => response.text())
    .then(content => {
      sampleText = content;
      source.value = `${content}`;
      document.getElementById("md-sample").value = content;
      refreshPreview();
    })
    .catch(console.error);
  </script>

</body>
</html>
